<!DOCTYPE html>
<html lang="en" ng-app>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MUMBAI RAILWAY | ATVM</title>

    <!-- Premium Assets -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Core Styles -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/atvm.css" rel="stylesheet">
</head>

<body ng-controller="atvmController">
    <!-- Premium Loading Screen -->
    <div class="premium-loader">
        <img src="images/logo.png" style="width: 80px; filter: grayscale(1); opacity: 0.3;">
        <div class="loader-bar">
            <div class="loader-fill"></div>
        </div>
        <p style="font-size: 11px; text-transform: uppercase; letter-spacing: 2px; color: #8e8e93;">Initializing Mumbai
            Rail Network...</p>
    </div>

    <!-- Script to trigger load finish -->
    <script>
        window.addEventListener('load', function () {
            setTimeout(function () {
                document.body.classList.add('loaded');
            }, 1500);
        });
    </script>

    <div class="main-container">
        <div class="main-panel">
            <!-- Sidebar: Station Navigator -->
            <div class="side-panel">
                <h3>Mumbai Rail</h3>

                <div class="line-tabs">
                    <div class="line-tab" ng-class="{active: currentLine == 'Western'}" ng-click="setLine('Western')">
                        West</div>
                    <div class="line-tab" ng-class="{active: currentLine == 'Central'}" ng-click="setLine('Central')">
                        Cent</div>
                    <div class="line-tab" ng-class="{active: currentLine == 'Harbour'}" ng-click="setLine('Harbour')">
                        Harb</div>
                </div>

                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search station / शोध..."
                        ng-model="searchQuery">
                </div>

                <div class="station-list">
                    <div class="station-item" ng-repeat="station in getFilteredStations()"
                        ng-class="{active: (selectionMode == 'source' && sourceStation == station) || (selectionMode == 'destination' && destinationStation == station)}"
                        ng-click="selectStation(station)">
                        <div class="names">
                            <span class="en">{{station.name}}</span>
                            <span class="hi">{{station.devng}}</span>
                        </div>
                        <i class="fas fa-chevron-right" style="opacity: 0.2; font-size: 12px;"></i>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard -->
            <div class="main-interface">
                <div class="dash-header">
                    <h2>Ticket Dashboard</h2>
                    <div class="mode-selector">
                        <div class="mode-btn" ng-class="{active: selectionMode == 'source'}"
                            ng-click="setSelectionMode('source')">SET SOURCE</div>
                        <div class="mode-btn" ng-class="{active: selectionMode == 'destination'}"
                            ng-click="setSelectionMode('destination')">SET DEST</div>
                    </div>
                </div>

                <div class="ticket-canvas">
                    <div class="ticket">
                        <div class="ticket-header">
                            <img src="images/logo.png" class="ticket-logo">
                            <div class="railway-label">
                                <h3>{{currentLine}} Railway</h3>
                                <p>Automated Ticket Vending Machine</p>
                            </div>
                        </div>

                        <div class="ticket-body">
                            <div class="route-row">
                                <div class="route-point">
                                    <div class="label">From</div>
                                    <div class="city text-warning">{{sourceStation.name}}</div>
                                </div>
                                <div class="route-point">
                                    <div class="label">To</div>
                                    <div class="city text-success">{{destinationStation.name}}</div>
                                </div>
                            </div>

                            <div class="ticket-controls">
                                <div class="control-group">
                                    <div class="control-label">Journey Type</div>
                                    <div class="selector-grid">
                                        <div class="selector-item" ng-class="{active: !returnTicket}"
                                            ng-click="returnTicket = false">SINGLE</div>
                                        <div class="selector-item" ng-class="{active: returnTicket}"
                                            ng-click="returnTicket = true">RETURN</div>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <div class="control-label">Passengers</div>
                                    <div style="display: flex; flex-direction: column; gap: 10px;">
                                        <div class="p-icons-row">
                                            <span style="font-size: 10px; width: 40px; color: #8e8e93;">ADULT</span>
                                            <img src="images/person-icon.png" class="p-icon"
                                                ng-repeat="i in range(5) track by $index"
                                                ng-class="{active: $index < noOfAdults}"
                                                ng-click="setAdults($index + 1)">
                                        </div>
                                        <div class="p-icons-row">
                                            <span style="font-size: 10px; width: 40px; color: #8e8e93;">CHILD</span>
                                            <img src="images/person-icon.png" class="p-icon"
                                                ng-repeat="i in range(5) track by $index"
                                                ng-class="{active: $index < noOfChildren}"
                                                ng-click="setChildren($index + 1)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ticket-footer">
                            <div class="fare-block">
                                <h4>Total Fare</h4>
                                <div class="price">Rs. {{calculateFare()}}</div>
                            </div>
                            <button class="print-btn" onclick="window.print()">PRINT TICKET</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="attribution">
            2022 &copy; All Rights Reserved | Designed and Developed by
            <a href="https://github.com/Amey-Thakur">Amey Thakur</a> &
            <a href="https://github.com/msatmod">Mega Satish</a>
        </div>
    </div>

    <!-- Core Scripts -->
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/atvm-controller.js"></script>
</body>

</html>