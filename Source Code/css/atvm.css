:root {
    --apple-bg: rgba(253, 253, 255, 0.85);
    /* Slightly more opaque for better legibility */
    --apple-bg-accent: rgba(242, 242, 247, 0.5);
    --apple-border: rgba(255, 255, 255, 0.7);
    --apple-text: #1c1c1e;
    --apple-text-sec: #86868b;
    --apple-blue: #007aff;
    --apple-blue-hover: #006ede;
    --apple-green: #34c759;
    --apple-red: #ff3b30;
    --apple-shadow: 0 40px 100px rgba(0, 0, 0, 0.12);
    --apple-blur: blur(50px) saturate(200%);
    --wr-red: #d1121d;
}

html,
body {
    height: 100vh;
    margin: 0;
    padding: 0;
    overflow: hidden !important;
    font-family: 'Outfit', -apple-system, BlinkMacMacSystemFont, "SF Pro Display", sans-serif;
    color: var(--apple-text);
}

/* --- High-End Atmospheric CSS Background --- */
body {
    background: #000;
    position: relative;
    overflow: hidden !important;
}

body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("../images/background.jpg");
    background-size: cover;
    background-position: center;
    filter: brightness(0.3) contrast(1.2) saturate(0.6) blur(20px);
    /* Heavy premium blur */
    transform: scale(1.1);
    /* Prevent edge blur artifacts */
    z-index: -2;
}

body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%);
    z-index: -1;
}

.main-container {
    width: 100vw;
    height: 100vh;
    margin: 0;
    padding: 0;
    overflow: hidden;
    position: relative;
}

.main-panel {
    width: 100%;
    height: 100%;
    max-width: none;
    background: #fff;
    border-radius: 0;
    box-shadow: none;
    border: none;
    display: flex;
    overflow: hidden;
}

@keyframes dashEnter {
    from {
        opacity: 0;
        transform: scale(0.98) translateY(20px);
        filter: blur(5px);
    }

    to {
        opacity: 1;
        transform: scale(1) translateY(0);
        filter: blur(0);
    }
}

/* --- SIDE NAVIGATION (Stations & Lines) --- */
/* (Basic structure kept for compatibility, specifics moved to layout.css) */

.side-panel h3 {
    margin: 0 0 20px 0;
    font-weight: 900;
    font-size: 22px;
    letter-spacing: -1px;
    color: var(--mumbai-blue);
    text-transform: uppercase;
}

/* Specific Line Selection colors removed - now handled by premium card styles */

.search-input {
    width: 100%;
    background: #f2f2f7 !important;
    border: none !important;
    border-radius: 12px !important;
    padding: 16px 20px !important;
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--apple-text) !important;
    transition: all 0.3s !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02) !important;
}

.search-input:focus {
    background: #fff !important;
    box-shadow: 0 0 0 4px rgba(0, 51, 153, 0.2) !important;
}

.station-list {
    flex: 1;
    overflow-y: auto;
    padding-right: 15px;
}

.station-list::-webkit-scrollbar {
    width: 4px;
}

.station-list::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.06);
    border-radius: 10px;
}

.station-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    margin-bottom: 8px;
    border-radius: 18px;
    background: transparent;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.station-item:hover {
    background: rgba(255, 255, 255, 0.5);
    transform: translateX(4px);
}

.station-item.active {
    background: var(--apple-blue);
    color: #fff;
    box-shadow: 0 8px 16px rgba(0, 122, 255, 0.2);
}

.station-item .names {
    display: flex;
    flex-direction: column;
}

.station-item .en {
    font-weight: 700;
    font-size: 16px;
}

.station-item .hi {
    font-size: 12px;
    opacity: 0.7;
}

/* --- MAIN INTERFACE (Ticket Dashboard) --- */
.dash-header {
    padding: 30px 50px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fff;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.dash-header h2 {
    margin: 0;
    font-weight: 900;
    font-size: 28px;
    letter-spacing: -1.5px;
    color: var(--mumbai-blue);
    text-transform: uppercase;
}

/* --- MODE SELECTOR (Apple Segmented Control) --- */
.mode-selector {
    display: flex;
    background: #e3e3e8;
    /* Apple System Gray 5 */
    padding: 3px;
    border-radius: 10px;
    margin: 6px 24px 10px 24px;
    /* Align with sidebar content */
    position: relative;
    z-index: 1;
}

.mode-btn {
    flex: 1;
    padding: 8px 0;
    border-radius: 8px;
    font-weight: 600;
    font-size: 12px;
    cursor: pointer;
    background: transparent;
    color: #636366;
    /* Secondary Label Color */
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-align: center;
    border: none;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mode-btn:hover {
    color: #1c1c1e;
}

.mode-btn.active {
    background: #fff;
    color: #000;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.04);
    font-weight: 700;
}

/* --- Premium Ticket Dashboard --- */
.ticket-canvas {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 5px 20px;
    /* Ultra-compact padding */
    position: relative;
    z-index: 1;
    height: 100%;
}

.ticket {
    width: 100%;
    max-width: 850px;
    height: auto;
    max-height: 95vh;
    /* Ensure it fits */
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border-radius: 32px;
    box-shadow:
        0 20px 60px rgba(0, 0, 0, 0.05),
        0 0 0 1px rgba(255, 255, 255, 0.5) inset;
    border: none;
    overflow-y: auto;
    /* Scroll internally if absolutely needed */
    display: flex;
    flex-direction: column;
    padding: 30px;
    /* Reduced from 40px */
}

/* Header with Watermark & Branding */
.ticket-header {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
    /* Reduced */
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    flex-shrink: 0;
}

.ticket-logo {
    height: 50px;
    /* Reduced */
    margin-right: 15px;
}

.railway-label h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 800;
    text-transform: uppercase;
    color: var(--apple-text);
    letter-spacing: 0.5px;
}

.railway-label p {
    margin: 0;
    font-size: 12px;
    font-weight: 500;
    color: #8e8e93;
    letter-spacing: 1px;
    text-transform: uppercase;
}

/* Route Display */
.route-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    /* Reduced */
    position: relative;
    padding: 0 20px;
    flex-shrink: 0;
}

/* Connecting Arrow */
.route-row::after {
    content: 'â†’';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 28px;
    color: #d1d1d6;
    font-weight: 300;
}

.route-point {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 180px;
    background: transparent;
    padding: 0;
}

.route-point .label {
    font-size: 10px;
    font-weight: 700;
    color: #86868b;
    text-transform: uppercase;
    margin-bottom: 10px;
    letter-spacing: 1.5px;
}

.route-point .city-name {
    font-size: 20px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: var(--apple-text);
    margin-top: 10px;
}

/* --- Controls Section (Segmented Pills) --- */
.ticket-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    /* Reduced gap */
    margin-bottom: 30px;
    /* Reduced margin */
    flex-shrink: 0;
}

.control-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.control-label {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    color: #86868b;
    letter-spacing: 1px;
}

.segmented-control {
    display: flex;
    background: #e5e5ea;
    border-radius: 10px;
    padding: 3px;
}

.segment-btn {
    flex: 1;
    border: none;
    background: transparent;
    padding: 10px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    color: #000;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.segment-btn.active {
    background: #fff;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
}

/* --- Footer & Print Action --- */
/* Redundant ticker-footer block removed to avoid conflicts */

.print-btn {
    background: linear-gradient(135deg, #007aff, #005ecb);
    color: #fff;
    border: none;
    padding: 16px 50px;
    border-radius: 16px;
    font-size: 16px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(0, 122, 255, 0.3);
    transition: transform 0.2s, box-shadow 0.2s;
    display: flex;
    align-items: center;
    gap: 12px;
}

.print-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 15px 40px rgba(0, 122, 255, 0.4);
}

/* --- Creative Footer (Dev Route) --- */
.attribution {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Centered Linear Layout */
    gap: 25px;
    /* Tighter gap for cohesion */
    padding: 0 40px;
    background: #ffffff;
    border-top: 4px solid var(--wr-red);
    border-bottom: 4px solid var(--mumbai-blue);
    z-index: 1000;
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.05);
}

.footer-pipe {
    color: #c7c7cc;
    font-size: 20px;
    font-weight: 300;
    margin: 0 10px;
    /* Adjust gap/spacing handled by flex gap, but this fine tunes it */
}

/* --- ASSET INTEGRATION STYLES --- */

/* Mumbai Lifeline Hero Header */
.lifeline-header {
    background: #005eb8;
    /* Match the generated image blue BG */
    height: 80px;
    /* FIXED HEIGHT TO SAVE SPACE */
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    margin-bottom: 5px;
    /* Reduced margin */
    border-radius: 0;
    /* Full width strip look? Or keep rounded top? Keep rounded if panel has it. */
    flex-shrink: 0;
    /* Prevent collapsing */
}

.lifeline-header img {
    height: 100%;
    width: auto;
    /* Maintain aspect ratio */
    max-width: 100%;
    object-fit: contain;
    /* Ensure whole banner is visible */
    filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.2));
    transition: transform 0.3s;
}

.lifeline-header:hover img {
    transform: scale(1.05);
}

/* LED Map Button */
.map-trigger-container {
    background: transparent;
    text-align: center;
    padding: 10px 0;
    cursor: pointer;
    margin: 10px 0;
    display: flex;
    justify-content: center;
}

.led-map-btn {
    width: 240px;
    /* Make it prominent */
    height: auto;
    transition: all 0.2s;
    filter: brightness(1);
}

.map-trigger-container:hover .led-map-btn {
    filter: brightness(1.2) drop-shadow(0 0 15px rgba(0, 255, 0, 0.6));
    transform: scale(1.02);
}

.copyright-text {
    font-size: 11px;
    font-weight: 700;
    color: #8e8e93;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* --- MAIN LAYOUT : SIDE PANEL (Lively Vibe) --- */
.side-panel {
    background: #fdfdfe;
    /* Crisp white base */
    border-right: 1px solid rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    z-index: 10;
    box-shadow: 10px 0 40px rgba(0, 0, 0, 0.03);
    position: relative;
    overflow: hidden;
}

/* Subtle "Track Pattern" Background Animation */
.side-panel::before {
    content: '';
    position: absolute;
    top: -100px;
    /* Buffer for scrolling */
    left: 0;
    right: 0;
    bottom: -100px;
    background-image: radial-gradient(#d1d1d6 1.5px, transparent 1.5px);
    background-size: 24px 24px;
    opacity: 0.4;
    z-index: -1;
    animation: railTrackMove 30s linear infinite;
}

@keyframes railTrackMove {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(24px);
        /* Move one grid unit seamlessly */
    }
}

/* --- LINE SELECTOR (Vibrant & Native) --- */
/* --- LINE SELECTOR (Vibrant & Native) --- */
.line-selector {
    padding: 10px 24px 2px 24px;
    /* Reduced bottom padding */
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    /* Slightly tighter gap */
    background: transparent;
    /* Changed from opaque to transparent so animation shows through */
    border-bottom: none;
    /* Seamless flow */
}

.line-card {
    border: none;
    border-radius: 16px;
    height: 90px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    text-align: center;
}

.line-card h3 {
    font-size: 15px;
    font-weight: 800;
    margin: 0;
    z-index: 2;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Authentic Coach Colors & Vibe */
.line-card.wr {
    --line-color: #005eb8;
    /* Western: Standard Blue (slightly richer) */
    --line-bg: #f0f7ff;
}

.line-card.cr {
    --line-color: #C71585;
    /* Central: Distinct Magenta ("Siemens Pink") */
    --line-bg: #fff0f5;
}

.line-card.hb {
    --line-color: #800000;
    /* Harbour: Deep Maroon */
    --line-bg: #fffafa;
}

.line-card.th {
    --line-color: #28B463;
    /* Trans-Harbour: Green */
    --line-bg: #f6fff9;
    background-color: #f6fff9;
}

.line-card {
    background: var(--line-bg);
    /* Native feel background */
    border-radius: 14px;
    padding: 10px 12px;
    /* Compact padding */
    cursor: pointer;
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(0, 0, 0, 0.04);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);

    /* Natural "Spring" Animation */
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
        box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1),
        background-color 0.3s ease;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    height: 85px;
    /* Reduced layout footprint */
}

/* Stripe Decor - The "Livery" */
.line-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 6px;
    height: 100%;
    background: var(--line-color);
    opacity: 0.8;
    transition: width 0.3s ease, opacity 0.3s ease;
    border-radius: 4px 0 0 4px;
}

/* Hover Effects (Premium & Smooth) */
.line-card:hover {
    transform: scale(1.03) translateY(-4px);
    box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.15);
    /* Soft natural shadow */
    border-color: transparent;
    z-index: 10;
    filter: brightness(1.02);
}

.line-card:hover::before {
    width: 10px;
    opacity: 1;
}

/* Active State */
.line-card.active {
    background: var(--line-color);
    transform: scale(1.0);
    /* Restored the glowing colored shadow */
    box-shadow: 0 12px 30px -8px var(--line-color);
}

.line-card.active .line-info {
    color: white;
}

.line-card.active .line-name,
.line-card.active .line-route {
    color: white !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.line-card.active::before {
    display: none;
}

/* Typography inside card */
.line-info {
    z-index: 1;
}

.line-name {
    display: block;
    font-size: 14px;
    /* Reduced from 16px */
    font-weight: 800;
    /* Bolder for impact */
    color: var(--line-color);
    /* Color matched to line */
    margin-bottom: 2px;
    /* Tighter spacing */
    transition: color 0.3s;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.line-route {
    display: block;
    font-size: 10px;
    /* Reduced from 11px */
    color: #666;
    /* Softer grey */
    font-weight: 600;
}


/* --- SEARCH BAR --- */
/* --- SEARCH BAR --- */
.search-container {
    padding: 2px 30px 10px 30px;
    /* Reduced top padding */
    background: transparent;
    position: relative;
}

.search-input {
    width: 100%;
    box-sizing: border-box;
    padding: 16px 24px 16px 48px !important;
    /* Adjusted for icon position */
    border-radius: 18px;
    border: 1px solid rgba(0, 0, 0, 0.08);
    background: #fff;
    font-size: 16px;
    font-weight: 600;
    color: #1c1c1e;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.03);
}

.search-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    left: 44px;
    /* 30px (Parent Padding) + 14px (Inner Offset) */
    font-size: 18px;
    /* Slightly smaller to match text */
    color: var(--mumbai-blue);
    /* Keep blue brand color */
    opacity: 0.8;
    /* Slightly softer */
    pointer-events: none;
    z-index: 10;
    transition: all 0.3s ease;
}

.search-input:focus {
    border-color: var(--mumbai-blue);
    background: #fff;
    box-shadow: 0 8px 25px rgba(0, 94, 184, 0.15);
    /* Premium colored glow */
    outline: none;
    transform: translateY(-1px);
}

/* Sync Icon Lift with Input */
.search-input:focus~.search-icon {
    transform: translateY(calc(-50% - 1px));
    opacity: 1;
    text-shadow: 0 2px 4px rgba(0, 94, 184, 0.2);
}


/* --- STATION LIST (Lively Typography) --- */
.station-list {
    flex: 1;
    overflow-y: auto;
    padding: 0 24px 80px 24px;
    /* Bottom padding for scroll */
}

.station-item {
    background: #fff;
    margin-bottom: 12px;
    padding: 16px 20px;
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
    display: flex;
    align-items: center;
    border: 1px solid rgba(0, 0, 0, 0.04);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.02);
    position: relative;
    overflow: hidden;
}

/* Line Color Indicator Bar */
.station-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 6px;
    background: #e1e1e6;
    /* Default gray */
    transition: background 0.3s;
}

/* Dynamic Line Colors on Hover/Active */
.station-item:hover::before {
    background: var(--mumbai-blue);
    width: 8px;
    /* Slightly wider on hover */
}

.station-item:hover {
    transform: translateY(-2px) scale(1.005);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
    border-color: rgba(0, 0, 0, 0.05);
    z-index: 5;
}

/* Arrow Animation */
.station-item .fa-chevron-right {
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.station-item:hover .fa-chevron-right {
    opacity: 1 !important;
    color: var(--mumbai-blue);
    transform: translateX(4px);
    /* Slide Right */
}

/* Active State (Premium Apple Gradient with Animation) */
.station-item.active {
    background: linear-gradient(120deg, #007aff, #005ecb, #007aff);
    /* Extended Gradient */
    background-size: 200% 200%;
    animation: gradientShift 4s ease infinite;
    /* Subtle continuous movement */
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 25px rgba(0, 122, 255, 0.4);
    transform: scale(1.0);
}

@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

.station-item.active .station-name-en,
.station-item.active .station-name-mr,
.station-item.active .fa-chevron-right {
    color: #fff !important;
    opacity: 1 !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Remove the colored strip in active state for a cleaner look */
.station-item.active::before {
    display: none;
}

/* Ensure Station Sign is Visible on Blue Background (Halo Effect) */
.station-item.active .station-sign {
    filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.8));
    /* White Glow to separate from background */
    transform: scale(0.75);
    /* Slight pop */
}

.station-name-group {
    display: flex;
    flex-direction: column;
}

.station-name-en {
    font-size: 17px;
    font-weight: 700;
    color: #1c1c1e;
    letter-spacing: -0.3px;
}

.station-name-mr {
    font-size: 14px;
    font-weight: 500;
    color: #8e8e93;
    margin-top: 2px;
    font-family: 'Mukta', 'Baloo 2', sans-serif;
    /* Native Marathi font feel */
}

/* Station Sign Component (Icon inside list) */
.station-sign-mini {
    margin-right: 16px;
    /* Styles for the mini sign icon if used */
}



/* The Screen */
.led-screen {
    background: #000;
    height: 36px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
    /* Grid Pattern */
    background-image: radial-gradient(rgba(0, 50, 0, 0.3) 1px, transparent 1px);
    background-size: 3px 3px;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.9);
}

/* Scrolling Text Container */
.led-text {
    position: absolute;
    white-space: nowrap;
    color: #39ff14;
    /* Neon Green */
    font-family: 'Courier New', monospace;
    font-weight: 800;
    font-size: 16px;
    text-transform: uppercase;
    text-shadow: 0 0 5px rgba(57, 255, 20, 0.8);
    animation: marquee 15s linear infinite;
    padding-left: 100%;
    /* Start off-screen */
}

/* Second text element removed, we will use one combined line in HTML or just animate one block */
.led-text.mr {
    display: none;
    /* Hide separate marathi block if present, we'll combine in HTML */
}

@keyframes dropSwing {
    0% {
        transform: translateY(-100%) rotate(-10deg);
        opacity: 0;
    }

    100% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }
}

@keyframes signSway {

    0%,
    100% {
        transform: rotate(0deg);
    }

    25% {
        transform: rotate(1.5deg);
    }

    75% {
        transform: rotate(-1.5deg);
    }
}

@keyframes marquee {
    0% {
        transform: translate(0, 0);
    }

    100% {
        transform: translate(-100%, 0);
    }

    /* Standard Right-to-Left Scroll */
}

@keyframes dropSwing {
    0% {
        transform: translateY(-100%) rotate(-10deg);
        opacity: 0;
    }

    100% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }
}

@keyframes signSway {

    0%,
    100% {
        transform: rotate(0deg);
    }

    25% {
        transform: rotate(2deg);
    }

    75% {
        transform: rotate(-2deg);
    }
}

.map-header-img-wrapper:hover {
    transform: scale(1.05);
}

.map-header-img-wrapper:hover .map-header-img {
    filter: drop-shadow(0 5px 8px rgba(0, 255, 0, 0.4)) brightness(1.1);
    /* Green glow hint */
}

/* --- Side Panel Header (Clean) --- */
.side-header {
    padding: 24px 24px 10px 24px;
}

.side-header h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: #1c1c1e;
}

/* Lifeline Logo in Header */
.lifeline-logo-header {
    height: 55px;
    /* Matches header scale */
    width: auto;
    object-fit: contain;
    filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.15));
    border-radius: 8px;
    /* Slight rounding if it has square corners */
}

.side-header p {
    margin: 4px 0 0 0;
    font-size: 12px;
    color: #8e8e93;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.dev-route {
    display: flex;
    align-items: center;
    gap: 15px;
}

.dev-label {
    font-size: 10px;
    font-weight: 700;
    color: #8e8e93;
    letter-spacing: 1px;
}

/* Creative Footer Animations */
.dev-station {
    display: flex;
    align-items: center;
    gap: 8px;
    background: #f2f2f7;
    padding: 6px 14px;
    border-radius: 20px;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    cursor: pointer;
    border: 1px solid transparent;
}

.dev-station:hover {
    background: #e5e5ea;
    transform: translateY(-2px);
}

/* Station Dot Sonar Ripple */
.station-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    border: 2px solid #fff;
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s;
    position: relative;
    z-index: 1;
}

.station-dot::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: inherit;
    z-index: -1;
    opacity: 0;
}

/* Station Dot Sonar Ripple */
@keyframes sonarWave {
    0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 0.8;
    }

    100% {
        transform: translate(-50%, -50%) scale(4);
        opacity: 0;
    }
}

/* Train Sway Animation (Decoupled Movement) */
@keyframes sway {

    0%,
    100% {
        transform: scale(1.4) rotate(-3deg);
    }

    50% {
        transform: scale(1.4) rotate(3deg);
    }
}

/* Trigger Animations */
.station-link:hover .station-dot::after {
    animation: sonarWave 1s infinite cubic-bezier(0, 0, 0.2, 1);
}

.wr-dot {
    background: var(--wr-red);
}

.cr-dot {
    background: var(--mumbai-blue);
}

.station-name {
    font-size: 12px;
    font-weight: 800;
    color: #333;
    text-transform: uppercase;
}

.route-line-connector {
    display: flex;
    align-items: center;
    gap: 5px;
    color: #c7c7cc;
    position: relative;
    padding: 0 10px;
}

.line-segment {
    width: 20px;
    height: 2px;
    background: #c7c7cc;
    border-radius: 2px;
    transition: background 0.3s;
}

.route-line-connector .fa-train {
    position: relative;
    left: 0;
    transition: left 1.5s cubic-bezier(0.2, 0.6, 0.35, 1), color 0.5s;
    /* Smooth visual movement */
    z-index: 2;
}

/* --- INTERACTIVE ANIMATIONS (Cross-Link) --- */

/* 1. Hover AMEY (Left) */
.dev-route:has(.amey-link:hover) .fa-train {
    left: -26px;
    /* Move Left using Left property */
    color: var(--wr-red);
    animation: sway 0.6s infinite ease-in-out;
    /* Energetic Sway */
}

.dev-route:has(.amey-link:hover) .line-segment {
    background: rgba(209, 18, 29, 0.3);
    /* Track glows red */
}

/* Mega Reacts to Amey */
.dev-route:has(.amey-link:hover) .mega-link .dev-station {
    transform: translateX(5px);
    /* Nudge away slightly */
    opacity: 0.8;
}

.dev-route:has(.amey-link:hover) .mega-link .station-dot {
    background: var(--wr-red);
    /* Mega's dot turns Red (Sync) */
    box-shadow: 0 0 10px var(--wr-red);
}


/* 2. Hover MEGA (Right) */
.dev-route:has(.mega-link:hover) .fa-train {
    left: 26px;
    /* Move Right using Left property */
    color: var(--mumbai-blue);
    animation: sway 0.6s infinite ease-in-out -0.3s;
    /* Energetic Sway with offset */
}

.dev-route:has(.mega-link:hover) .line-segment {
    background: rgba(0, 51, 153, 0.3);
    /* Track glows blue */
}

/* Amey Reacts to Mega */
.dev-route:has(.mega-link:hover) .amey-link .dev-station {
    transform: translateX(-5px);
    /* Nudge away slightly */
    opacity: 0.8;
}

.dev-route:has(.mega-link:hover) .amey-link .station-dot {
    background: var(--mumbai-blue);
    /* Amey's dot turns Blue (Sync) */
    box-shadow: 0 0 10px var(--mumbai-blue);
}

/* Ensure links are handled if we want clickability, but for now just visual badges as requested */
.station-link {
    text-decoration: none;
    color: inherit;
    display: block;
}

.station-link:hover .dev-station {
    background: #fff;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    border-color: rgba(0, 0, 0, 0.05);
}

.station-link:hover .station-dot {
    transform: scale(1.3);
    box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.05);
}

/* --- Main Interface Area --- */
.main-interface {
    flex: 1;
    background: #f5f5f7;
    padding: 5px 25px;
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: auto;
    /* Allow scrolling if needed */
}

/* Background Watermark (Full Section Centered) */
.main-interface::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 100%;
    background: url('../images/mumbai_lifeline_wallpaper.png') no-repeat center center;
    background-size: 100% 100%;
    /* Now uses correct aspect ratio image, so no distortion */
    opacity: 1;
    /* Full visibility */
    pointer-events: none;
    z-index: 0;
}

/* Ticket Card (Clean white) */
.ticket {
    position: relative;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    max-width: 800px;
    margin: 0 auto;
    height: fit-content;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    animation: cardFadeIn 0.6s ease-out;
    z-index: 1;
}

/* The Animated Track (Dotted Line) */
.ticket::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    bottom: 10px;
    border: 2px dashed rgba(0, 122, 255, 0.1);
    border-radius: 15px;
    pointer-events: none;
    z-index: -1;
}

/* Interactive Train Implementation */
.train-track-container {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 10;
}

.train-vessel {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    /* Changed: Unblocks clicks to ticket buttons */
    cursor: default;
}

.train-vessel:active {
    cursor: grabbing;
}

/* Professional Modern Train Styling (Simplified) */
.compartment {
    position: absolute;
    width: 32px;
    height: 14px;
    background: #e0e0e0;
    /* Modern Silver Body */
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 3px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    z-index: 10;
    overflow: visible;
    animation: trainPath 20s infinite linear;
    pointer-events: auto;
    /* Changed: Keeps the train itself clickable */
    cursor: pointer;
}

/* Magenta Stripe at the bottom */
.compartment::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: #a020f0;
    /* Magenta Stripe */
    border-radius: 0 0 2px 2px;
}

/* Windows */
.compartment::before {
    content: '';
    position: absolute;
    top: 3px;
    left: 4px;
    right: 4px;
    height: 3px;
    background: #333;
    /* Dark Windows */
    border-radius: 1px;
}

/* Engine (Coach 1) - Yellow Face & Headlights */
.compartment:nth-child(1) {
    background: #e0e0e0;
    animation-delay: -1.2s;
    /* Leads the pack */
}

/* When reversed, the engine (child 1) needs to be at the front of the reversed path.
   Wait, the easiest way is to adjust animation delays. 
   Normal: 1(0) -> 2(-0.4) -> 3(-0.8) -> 4(-1.2)
   Reverse: 4(0) -> 3(-0.4) -> 2(-0.8) -> 1(-1.2) - No, that changes which coach is the head.
   Actually, the user wants the Engine (yellow part) to ALWAYS lead.
   This means we need to swap the face when direction changes or keep the order.
*/

.compartment:nth-child(1) .engine-face {
    position: absolute;
    top: 0;
    right: 0;
    /* Face forward in normal direction */
    width: 6px;
    height: 100%;
    background: #FFD700;
    border-radius: 0 2px 2px 0;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    padding: 2px 0;
}

.train-reverse .compartment:nth-child(1) .engine-face {
    left: 0;
    right: auto;
    border-radius: 2px 0 0 2px;
}

/* Headlights for Engine */
.compartment:nth-child(1) .engine-face::before,
.compartment:nth-child(1) .engine-face::after {
    content: '';
    width: 3px;
    height: 3px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 5px #fff;
}

/* Coach Staggering (Correct Order) */
.compartment:nth-child(2) {
    animation-delay: -0.8s;
}

.compartment:nth-child(3) {
    animation-delay: -0.4s;
}

.compartment:nth-child(4) {
    animation-delay: 0s;
}

/* Direction Control */
.train-reverse .compartment {
    animation-direction: reverse;
}

/* Smooth Path with Rounded Corners */
@keyframes trainPath {
    0% {
        top: 12px;
        left: 12px;
        transform: translate(-50%, -50%) rotate(0deg);
    }

    23% {
        top: 12px;
        left: calc(100% - 25px);
        transform: translate(-50%, -50%) rotate(0deg);
    }

    25% {
        top: 25px;
        left: calc(100% - 12px);
        transform: translate(-50%, -50%) rotate(90deg);
    }

    48% {
        top: calc(100% - 25px);
        left: calc(100% - 12px);
        transform: translate(-50%, -50%) rotate(90deg);
    }

    50% {
        top: calc(100% - 12px);
        left: calc(100% - 25px);
        transform: translate(-50%, -50%) rotate(180deg);
    }

    73% {
        top: calc(100% - 12px);
        left: 25px;
        transform: translate(-50%, -50%) rotate(180deg);
    }

    75% {
        top: calc(100% - 25px);
        left: 12px;
        transform: translate(-50%, -50%) rotate(270deg);
    }

    98% {
        top: 25px;
        left: 12px;
        transform: translate(-50%, -50%) rotate(270deg);
    }

    100% {
        top: 12px;
        left: 12px;
        transform: translate(-50%, -50%) rotate(360deg);
    }
}

/* --- Floating LED Map Sign (Restored to Left) --- */
.floating-map-btn {
    position: absolute;
    top: -5px;
    left: 25px;
    /* Far left of the main interface */
    right: auto;
    width: auto;
    z-index: 100;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    transform-origin: top center;
    animation: dropSwing 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
}

.floating-map-btn:hover {
    animation: signSway 3s ease-in-out infinite;
}

.hanger-rods {
    display: flex;
    justify-content: space-between;
    width: 60%;
    height: 40px;
}

.rod {
    width: 4px;
    height: 100%;
    background: linear-gradient(to right, #8e8e93, #d1d1d6, #8e8e93);
}

.led-board {
    background: #1c1c1e;
    padding: 8px 12px;
    border-radius: 6px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 0 1px #3a3a3c;
    border: 1px solid #000;
    width: 200px;
    /* Fixed width to prevent clipping */
    text-align: center;
}

.led-screen {
    background: #000;
    height: 36px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
    background-image: radial-gradient(#111 1px, transparent 1px);
    background-size: 3px 3px;
    box-shadow: inset 0 0 10px #000;
}

.led-text {
    font-family: 'Courier New', Courier, monospace;
    font-weight: 900;
    font-size: 14px;
    color: #0f0;
    /* Map LED is Green */
    text-shadow: 0 0 5px #0f0;
    white-space: nowrap;
    display: inline-block;
    padding-left: 100%;
    animation: ledScroll 15s linear infinite;
}

@keyframes ledScroll {
    0% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(-100%);
    }
}

/* --- Iconic Mumbai Analog Station Clock --- */
.station-clock {
    position: absolute;
    top: -5px;
    right: 60px;
    /* Hanging Right */
    z-index: 110;
    display: flex;
    flex-direction: column;
    align-items: center;
    transform-origin: top center;
    animation: dropSwing 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
}

.hanger-rod {
    width: 6px;
    height: 60px;
    background: linear-gradient(to right, #444, #666, #444);
    box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
}

.clock-face {
    width: 100px;
    height: 100px;
    background: #fff;
    border: 8px solid #333;
    /* Thick black frame */
    border-radius: 50%;
    position: relative;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(0, 0, 0, 0.1);
    margin-top: -5px;
}

.clock-face::after {
    content: '';
    position: absolute;
    inset: -4px;
    border: 2px solid #555;
    /* Outer rim detail */
    border-radius: 50%;
}

.hand {
    position: absolute;
    bottom: 50%;
    left: 50%;
    transform-origin: bottom center;
    border-radius: 4px;
    z-index: 5;
}

.hour-hand {
    width: 4px;
    height: 30%;
    background: #222;
}

.min-hand {
    width: 3px;
    height: 40%;
    background: #444;
}

.sec-hand {
    width: 2px;
    height: 45%;
    background: #ef4444;
    /* Iconic Red Seconds Hand */
    z-index: 6;
}

.center-nut {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 8px;
    height: 8px;
    background: #000;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.number {
    position: absolute;
    font-family: 'Outfit', sans-serif;
    font-weight: 800;
    font-size: 14px;
    color: #333;
    transform: translate(-50%, -50%);
}

.num12 {
    top: 15%;
    left: 50%;
}

.num3 {
    top: 50%;
    left: 85%;
}

.num6 {
    top: 85%;
    left: 50%;
}

.num9 {
    top: 50%;
    left: 15%;
}

/* --- Mumbai Station Speaker (Next to Clock) --- */
.station-speaker {
    position: absolute;
    top: -5px;
    right: 220px;
    /* Shifted more to the right to avoid card overlap */
    z-index: 105;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    transform-origin: top center;
    animation: dropSwing 1.8s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
}

.speaker-wire {
    width: 2px;
    height: 40px;
    /* Shortened to avoid hanging over the ticket card */
    background: #333;
    box-shadow: 1px 0 3px rgba(0, 0, 0, 0.2);
}

.speaker-body {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #444, #222);
    border-radius: 12px;
    position: relative;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
    border: 2px solid #555;
    display: flex;
    align-items: center;
    justify-content: center;
}

.speaker-grill {
    width: 44px;
    height: 44px;
    background: radial-gradient(circle, #000 1px, transparent 1.5px);
    background-size: 4px 4px;
    border-radius: 50%;
    border: 2px solid #111;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
}

/* Sound Waves Animation (Only when speaking) */
.sound-waves {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    pointer-events: none;
    display: none;
}

.station-speaker.speaking .sound-waves {
    display: block;
}

.sound-waves span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border: 2px solid rgba(0, 122, 255, 0.5);
    border-radius: 50%;
    animation: wavePulse 1.5s infinite;
    opacity: 0;
}

.sound-waves span:nth-child(2) {
    animation-delay: 0.5s;
}

.sound-waves span:nth-child(3) {
    animation-delay: 1s;
}

@keyframes wavePulse {
    0% {
        width: 40px;
        height: 40px;
        opacity: 0.8;
    }

    100% {
        width: 120px;
        height: 120px;
        opacity: 0;
    }
}

/* Reuse swing animations */
@keyframes signSway {

    0%,
    100% {
        transform: rotate(-1deg);
    }

    50% {
        transform: rotate(1deg);
    }
}

@keyframes dropSwing {
    0% {
        transform: translateY(-100%) rotate(5deg);
        opacity: 0;
    }

    100% {
        transform: translateY(0) rotate(0);
        opacity: 1;
    }
}

.ticket-header,
.ticket-body,
.ticket-controls {
    position: relative;
    z-index: 20;
    /* Increased: Ensure content is ALWAYS above the train */
    background: transparent !important;
}

.ticket {
    background: #fff;
    /* Re-apply solid white to container since children are transparent */
}

.ticket:hover {
    transform: translateY(-5px);
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.12);
}

@keyframes cardFadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Ticket Header - Compact */
.ticket-header {
    padding: 8px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.ticket-header h3 {
    margin: 0;
    font-size: 18px;
}

.ticket-header p {
    margin: 0;
    font-size: 12px;
    opacity: 0.7;
}

.ticket-logo {
    width: 40px;
    height: 40px;
    object-fit: contain;
}

/* Remove extra bottom space from footer */
.ticket-controls {
    margin-bottom: 0;
    padding-bottom: 0;
}

/* --- New Ticket Dashboard Layout (Compact) --- */
.ticket-body {
    padding: 8px 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.ticket-controls {
    width: 100%;
    display: block;
    align-self: stretch;
}

.ticket-footer {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    width: 100%;
    padding: 12px 20px;
    background: #fff;
    border-top: 1px dashed rgba(0, 0, 0, 0.1);
    box-sizing: border-box;
    margin-top: auto;
    justify-items: center;
    align-items: start;
}

.fare-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.fare-label {
    font-size: 11px;
    font-weight: 700;
    color: #8e8e93;
    text-transform: uppercase;
}

.fare-amount {
    font-weight: 900;
    font-size: 32px;
    color: #1c1c1e;
    letter-spacing: -1px;
    line-height: 1;
}

/* Standardized Fare Display in Footer */

.ticket-footer .print-btn {
    background: linear-gradient(135deg, #007aff 0%, #005ecb 100%);
    color: #fff;
    border: none;
    padding: 14px 28px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);
    white-space: nowrap;
    flex-shrink: 0;
}

.ticket-footer .print-btn:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 122, 255, 0.5);
    background: linear-gradient(135deg, #0088ff 0%, #0066dd 100%);
}

.ticket-footer .print-btn:active {
    transform: translateY(-1px) scale(0.98);
    box-shadow: 0 4px 12px rgba(0, 122, 255, 0.4);
}

/* Journey Type Segmented Control (Apple Sliding Pill) */
.journey-type-control,
.mode-selector {
    background: #e3e3e8;
    /* Apple Gray Content Background */
    border-radius: 9px;
    padding: 2px;
    /* Tight padding for the glider track */
    display: flex;
    position: relative;
    user-select: none;
    height: 44px;
    /* Sufficient height */
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.06);
    /* Inner depth */
}

/* The Sliding Pill */
.glider {
    position: absolute;
    top: 2px;
    left: 2px;
    width: calc(50% - 2px);
    height: calc(100% - 4px);
    background: #fff;
    border-radius: 7px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12), 0 3px 1px rgba(0, 0, 0, 0.04);
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    z-index: 1;
}

/* Slide to Right when Return is active */
.journey-type-control.mode-return .glider,
.mode-selector.mode-dest .glider {
    transform: translateX(100%);
}

.segment-option,
.mode-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-radius: 7px;
    cursor: pointer;
    position: relative;
    z-index: 2;
    /* Text above glider */
    transition: color 0.2s;
    color: #8e8e93;
    /* Default Inactive */
    font-weight: 700;
    font-size: 13px;
    text-align: center;
}

.segment-option:hover,
.mode-btn:hover {
    color: #000;
}

.segment-option.active,
.mode-btn.active {
    background: transparent !important;
    /* Remove old bg */
    box-shadow: none !important;
    /* Remove old shadow */
    color: #000;
}

.seg-label {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.3px;
    line-height: 1.2;
    display: flex;
    align-items: center;
    gap: 6px;
    /* Space between English and Marathi */
}

.mr-label {
    font-family: 'Mukta', sans-serif;
    font-size: 14px;
    /* Slightly larger for readability */
    font-weight: 500;
    opacity: 0.8;
}

.seg-sub {
    font-size: 9px;
    opacity: 0.6;
    margin-top: 1px;
    font-weight: 500;
}

/* Compact Route Visual */
.route-visual-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #f9f9fa;
    padding: 15px 20px;
    border-radius: 12px;
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.station-node {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

.node-dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: 3px solid var(--mumbai-blue);
    background: #fff;
}

.node-name {
    font-size: 15px;
    font-weight: 700;
    color: #1c1c1e;
}

.route-arrow {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #c7c7cc;
    font-size: 14px;
    position: relative;
}

.route-arrow i {
    transform: scaleX(1.5);
}

.journey-badge {
    background: #34c759;
    color: #fff;
    font-size: 9px;
    font-weight: 800;
    padding: 2px 6px;
    border-radius: 4px;
    margin-top: 4px;
}

.class-badge {
    background: #e5e5ea;
    color: #1c1c1e;
    font-size: 9px;
    font-weight: 800;
    padding: 2px 6px;
    border-radius: 4px;
    margin-top: 4px;
}

.class-badge.badge-first {
    background: #1c1c1e;
    /* Dark premium background for First Class */
    color: #ffd700;
    /* Gold text */
}

/* Passenger Controls */
.passenger-controls-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.pax-control-card {
    background: #fff;
    border: 1px solid #e5e5ea;
    border-radius: 12px;
    padding: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.pax-label {
    font-size: 11px;
    font-weight: 800;
    color: #8e8e93;
    margin-bottom: 8px;
    text-transform: uppercase;
}

.stepper {
    display: flex;
    align-items: center;
    gap: 15px;
}

.step-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: none;
    background: #e5e5ea;
    color: #1c1c1e;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.step-btn:hover:not(:disabled) {
    background: #d1d1d6;
}

.step-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.step-val {
    font-size: 20px;
    font-weight: 700;
    width: 20px;
    text-align: center;
}

.dash-header {
    display: none;
    /* Ensure old header stays hidden */
}

h2 {
    text-transform: uppercase;
    font-weight: bold;
}

/* --- Premium Map Overlay --- */
.map-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(245, 245, 247, 0.95);
    /* Deep Glass */
    backdrop-filter: blur(20px);
    z-index: 2000;
    display: flex;
    flex-direction: column;
    padding: 40px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    transform: scale(0.98);
}

.map-overlay.active {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}

.map-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 40px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    padding-bottom: 20px;
}

.map-title {
    font-size: 28px;
    font-weight: 800;
    color: #1c1c1e;
    display: flex;
    align-items: center;
    gap: 15px;
    letter-spacing: -0.5px;
}

.map-title i {
    color: var(--mumbai-blue);
}

.close-map-btn {
    background: #e5e5ea;
    color: #1c1c1e;
    padding: 12px 24px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.close-map-btn:hover {
    background: #d1d1d6;
    transform: translateY(-2px);
}

/* --- Schematic Map Diagram --- */
.map-diagram {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    height: 100%;
    overflow-y: auto;
    padding-bottom: 80px;
    /* Space for footer */
}

.rail-line-col {
    position: relative;
    padding: 20px 0 20px 40px;
    /* Space for track on left */
}

/* realistic track visual */
.track-line {
    position: absolute;
    left: 18px;
    /* Center of the 40px padding area */
    top: 60px;
    /* Start below header */
    bottom: 20px;
    width: 6px;
    /* The Rails */
    border-left: 2px solid;
    border-right: 2px solid;
    /* The Sleepers */
    background: linear-gradient(to bottom, currentColor 2px, transparent 2px);
    background-size: 100% 8px;
    /* Sleeper every 8px */
    opacity: 0.6;
    z-index: 0;
}

.line-wr .track-line {
    color: var(--western-red);
    border-color: var(--western-red);
}

.line-cr .track-line {
    color: var(--central-yellow);
    border-color: var(--central-yellow);
}

.line-hr .track-line {
    color: var(--harbour-blue);
    border-color: var(--harbour-blue);
}

.line-th .track-line {
    color: var(--trans-purple);
    border-color: var(--trans-purple);
}

.rail-line-label {
    font-size: 18px;
    font-weight: 800;
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #8e8e93;
    text-align: center;
    border-bottom: 2px solid;
    padding-bottom: 10px;
    margin-left: -40px;
    /* Center relative to column, ignoring track padding */
}

.line-wr .rail-line-label {
    border-color: var(--western-red);
    color: var(--western-red);
}

.line-cr .rail-line-label {
    border-color: var(--central-yellow);
    color: var(--central-yellow);
}

.line-hr .rail-line-label {
    border-color: var(--harbour-blue);
    color: var(--harbour-blue);
}

.line-th .rail-line-label {
    border-color: var(--trans-purple);
    color: var(--trans-purple);
}

.map-station-node {
    padding: 6px 10px;
    margin: 4px 0;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 14px;
    font-weight: 600;
    color: #3a3a3c;
    display: flex;
    align-items: center;
    position: relative;
    z-index: 1;
    /* Above track */
}

/* Station Dot (Sit on track) */
.map-station-node::before {
    content: '';
    position: absolute;
    left: -26px;
    /* Align with track center (40px padding - 26px = ~14px? wait. padding-left is 40. track is at 18. center of track is 18+3 = 21. dot needs to be at 21.) */
    /* Wait, let's use absolute positioning relative to the node */
    left: -26px;
    top: 50%;
    transform: translateY(-50%);

    width: 12px;
    height: 12px;
    background: #fff;
    border: 3px solid #8e8e93;
    /* Default gray */
    border-radius: 50%;
    transition: all 0.2s;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Color code station dots */
.line-wr .map-station-node::before {
    border-color: var(--western-red);
}

.line-cr .map-station-node::before {
    border-color: var(--central-yellow);
}

.line-hr .map-station-node::before {
    border-color: var(--harbour-blue);
}

.line-th .map-station-node::before {
    border-color: var(--trans-purple);
}

.map-station-node:hover {
    background: rgba(0, 0, 0, 0.03);
    color: #000;
    transform: translateX(5px);
}

.map-station-node:hover::before {
    background: var(--mumbai-blue);
    /* Active Blue Fill */
    border-color: var(--mumbai-blue);
    transform: translateY(-50%) scale(1.3);
}

/* Interchange Station (Big Junction Node) */
.map-station-node.interchange::before {
    width: 16px;
    height: 16px;
    background: #fff;
    border-width: 4px;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
    /* Outer ring */
}

.map-station-node.interchange {
    font-weight: 800;
    /* Bolder text for hubs */
    font-size: 15px;
}

/* --- Restored Loader Styles --- */
.premium-loader {
    position: fixed;
    inset: 0;
    background: #fff;
    z-index: 3000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    transition: opacity 0.8s, visibility 0.8s;
}

.loader-bar {
    width: 180px;
    height: 3px;
    background: #eee;
    border-radius: 2px;
    overflow: hidden;
    margin: 20px 0;
}

.loader-fill {
    width: 0;
    height: 100%;
    background: var(--apple-blue);
    animation: loadFill 2s forwards ease-in-out;
}

@keyframes loadFill {
    to {
        width: 100%;
    }
}

body.loaded .premium-loader {
    opacity: 0;
    visibility: hidden;
}

.text-warning {
    color: #f5a623;
}

.text-success {
    color: #34c759;
}

/* Utilities */
.opaque {
    opacity: 0.1 !important;
    filter: grayscale(1);
}

input {
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
}

/* --- Row Container for Side-by-Side Selectors --- */
.controls-row {
    display: flex;
    gap: 15px;
    margin-bottom: 0;
    /* Removed to rely on ticket-body gap */
}

/* --- Class Selector (Toggle) --- */
.class-selector-control,
.journey-type-control {
    flex: 1;
    /* Force equal width */
    margin-bottom: 0 !important;
    /* Remove bottom margin since container handles it */
    height: 55px;
    /* Standardize height for both */
    display: flex;
    background: #e3e3e8;
    /* Matched Apple Gray from journey-type-control */
    border-radius: 9px;
    /* Matched radius */
    padding: 2px;
    /* Matched padding */
    position: relative;
    cursor: pointer;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.06);
    /* Matched shadow */
}

.class-selector-control.class-first {
    border: none;
    background: #e3e3e8;
    /* Maintain same background */
}

.class-glider {
    position: absolute;
    top: 2px;
    left: 2px;
    width: calc(50% - 2px);
    height: calc(100% - 4px);
    background: #fff;
    border-radius: 7px;
    /* Matched radius */
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12), 0 3px 1px rgba(0, 0, 0, 0.04);
    /* Matched shadow */
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    /* EXACT MATCH to journey control */
    z-index: 1;
}

.class-selector-control.class-first .class-glider {
    transform: translateX(100%);
    background: #fff;
}

.class-option {
    flex: 1;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
    /* Matched duration */
    user-select: none;
    position: relative;
    color: #8e8e93;
    /* Matched default color */
}

.class-option.active {
    color: #000;
    /* Matched active color */
}

.class-selector-control.class-first .class-option.active {
    color: #000;
    text-shadow: none;
}

.class-label {
    font-size: 13px;
    /* Matched size */
    font-weight: 700;
    letter-spacing: 0.3px;
    line-height: 1.2;
    display: flex;
    align-items: center;
    gap: 6px;
}

.class-sub {
    font-size: 9px;
    /* Matched sub size */
    opacity: 0.6;
    margin-top: 1px;
    font-weight: 500;
}

/* --- Premium Ticket Modal Styling --- */
.ticket-modal-overlay {
    position: fixed;
    inset: 0;
    z-index: 5000;
    /* Top most layer */
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.ticket-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(10px);
}

.ticket-modal-content {
    position: relative;
    z-index: 5001;
    background: #fff;
    border-radius: 24px;
    padding: 20px;
    box-shadow: 0 40px 100px rgba(0, 0, 0, 0.2);
    transform: scale(0.9);
    transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
    display: flex;
    flex-direction: column;
    align-items: center;
    max-width: 90vw;
    max-height: 90vh;
}

.ticket-modal-overlay.active .ticket-modal-content {
    transform: scale(1);
}

.modal-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.modal-header h3 {
    margin: 0;
    font-size: 18px;
    color: #1c1c1e;
    font-weight: 800;
}

.close-modal-btn {
    background: #f2f2f7;
    border: none;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    font-size: 16px;
    font-weight: bold;
    color: #8e8e93;
    cursor: pointer;
    transition: all 0.2s;
}

.close-modal-btn:hover {
    background: #e5e5ea;
    color: #000;
}

/* --- Modal Actions --- */
.modal-actions {
    margin-top: 25px;
    width: 100%;
    display: flex;
    gap: 15px;
    justify-content: center;
}

.action-btn {
    border: none;
    padding: 12px 20px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s;
    flex: 1;
    justify-content: center;
}

.download-btn {
    background: #007aff;
    color: #fff;
    box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
}

.download-btn:hover {
    background: #0062cc;
    transform: translateY(-2px);
}

.share-btn {
    background: #34c759;
    color: #fff;
    box-shadow: 0 4px 12px rgba(52, 199, 89, 0.3);
}

.share-btn:hover {
    background: #28a745;
    transform: translateY(-2px);
}

.copy-btn {
    background: #f2f2f7;
    color: #1c1c1e;
    /* Changed from white to dark for contrast on light bg */
    border: 1px solid #d1d1d6;
}

.copy-btn:hover {
    background: #e5e5ea;
    transform: translateY(-2px);
}

/* --- Unique Ticket Author Links --- */
.author-links {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 5px;
}

.author-link {
    text-decoration: none;
    color: #007aff;
    font-weight: 800;
    font-size: 12px;
    letter-spacing: 0.5px;
    transition: all 0.2s;
    padding: 4px 8px;
    border-radius: 6px;
    background: rgba(0, 122, 255, 0.1);
}

.author-link:hover {
    background: #007aff;
    color: #fff;
    transform: scale(1.05);
}

.separator {
    color: #8e8e93;
    font-size: 10px;
}

/* --- Shareable Ticket Export Wrapper --- */
.share-ticket-wrapper {
    position: relative;
    /* Changed from fixed to flow naturally in modal */
    width: auto;
    z-index: 1;
    opacity: 1;
    pointer-events: auto;
    left: auto;
    top: auto;
}

.share-ticket {
    width: 600px;
    background: #fff;
    padding: 30px;
    border-radius: 24px;
    font-family: 'Outfit', sans-serif;
    color: #1c1c1e;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
    border: 1px solid #e5e5ea;
}

.share-ticket::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    -webkit-mask-image: radial-gradient(#007aff 0.5px, transparent 0.5px);
    mask-image: radial-gradient(#007aff 0.5px, transparent 0.5px);
    background-color: rgba(0, 122, 255, 0.05);
    background-size: 15px 15px;
    pointer-events: none;
}

.st-header {
    display: flex;
    align-items: center;
    gap: 15px;
    border-bottom: 2px solid #007aff;
    padding-bottom: 15px;
    margin-bottom: 20px;
}

.st-logo {
    width: 50px;
    height: 50px;
}

.st-rail-info h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 800;
    letter-spacing: 1px;
    color: #007aff;
}

.st-rail-info p {
    margin: 0;
    font-size: 12px;
    font-weight: 600;
    color: #8e8e93;
}

.st-type-badge {
    margin-left: auto;
    background: #007aff;
    color: #fff;
    padding: 6px 14px;
    border-radius: 10px;
    font-weight: 900;
    font-size: 14px;
    box-shadow: 0 4px 10px rgba(0, 122, 255, 0.2);
}

.st-main {
    margin-bottom: 25px;
}

.st-route {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: #f2f2f7;
    padding: 18px 25px;
    border-radius: 16px;
    margin-bottom: 20px;
    border: 1px solid #e5e5ea;
}

.st-point {
    display: flex;
    flex-direction: column;
}

.st-arrow {
    font-size: 28px;
    color: #007aff;
    opacity: 0.5;
}

.st-label {
    font-size: 10px;
    font-weight: 800;
    color: #8e8e93;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: 6px;
}

.st-val {
    font-size: 20px;
    font-weight: 700;
    color: #1c1c1e;
}

.st-details-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 25px;
    padding: 0 10px;
}

.st-item {
    display: flex;
    flex-direction: column;
}

.st-item .st-val {
    font-size: 16px;
}

.st-fare-sec {
    border-top: 1px dashed #d1d1d6;
    padding: 20px 10px 0 10px;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
}

.st-price {
    font-size: 36px;
    font-weight: 900;
    color: #1c1c1e;
    letter-spacing: -1px;
}

.st-meta {
    display: flex;
    justify-content: space-between;
    margin-bottom: 30px;
    padding: 15px 10px;
    background: rgba(0, 122, 255, 0.03);
    border-radius: 12px;
}

.st-meta .st-val {
    font-size: 13px;
    font-family: 'Monaco', monospace;
    opacity: 0.8;
}

.st-footer {
    text-align: center;
    border-top: 1px solid #f2f2f7;
    padding-top: 25px;
}

.st-message {
    font-size: 14px;
    font-style: italic;
    color: #3a3a3c;
    margin-bottom: 20px;
    font-weight: 500;
}

.st-authorship {
    font-size: 11px;
    color: #8e8e93;
    line-height: 1.6;
    letter-spacing: 0.5px;
}

.st-authorship strong {
    color: #007aff;
    font-weight: 800;
}

.st-qr-code {
    position: absolute;
    bottom: 30px;
    right: 30px;
    text-align: center;
}

.st-qr-code i {
    font-size: 50px;
    color: #1c1c1e;
    margin-bottom: 8px;
    opacity: 0.9;
}

.st-qr-code p {
    margin: 0;
    font-size: 9px;
    font-weight: 800;
    letter-spacing: 1.5px;
    color: #8e8e93;
}